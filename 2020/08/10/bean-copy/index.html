<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Bean Copyä¹Ÿå°±è¿™ä¹ˆç‚¹äº‹äº†ï¼ | å¢¨é±¼ğŸ¦‘çš„ä¸ªäººåšå®¢</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 6.0.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Bean Copyä¹Ÿå°±è¿™ä¹ˆç‚¹äº‹äº†ï¼</h1><a id="logo" href="/.">å¢¨é±¼ğŸ¦‘çš„ä¸ªäººåšå®¢</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Bean Copyä¹Ÿå°±è¿™ä¹ˆç‚¹äº‹äº†ï¼</h1><div class="post-meta">2020-08-10</div><div class="post-content"><p>å·¥ä½œä¸­ç»å¸¸éœ€è¦ç”¨åˆ°å¯¹è±¡çš„Copyï¼Œè¿™ç¯‡æ–‡ç« ç³»ç»Ÿå¯¹å¯¹è±¡Copyåšä¸€ä¸ªç³»ç»Ÿçš„æ€»ç»“ã€‚</p>
<span id="more"></span>
<h1 id="ä»€ä¹ˆæ˜¯æ·±æ‹·è´å’Œæµ…æ‹·è´"><a href="#ä»€ä¹ˆæ˜¯æ·±æ‹·è´å’Œæµ…æ‹·è´" class="headerlink" title="ä»€ä¹ˆæ˜¯æ·±æ‹·è´å’Œæµ…æ‹·è´"></a>ä»€ä¹ˆæ˜¯æ·±æ‹·è´å’Œæµ…æ‹·è´</h1><p>å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼š<br><img src="https://img-blog.csdnimg.cn/2020122011033046.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE4NTE1MTU1,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æˆ‘ä»¬éƒ½çŸ¥é“å¯¹è±¡çš„å¼•ç”¨åˆ†é…åœ¨æ ˆä¸Šï¼Œå¯¹è±¡çš„å†…å­˜åˆ†é…åœ¨å †ä¸Šã€‚<br>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯¹è±¡objBæ˜¯å¯¹è±¡objAçš„ä¸€ä¸ªæ‹·è´ï¼ŒobjBåªæ˜¯åœ¨æ ˆä¸Šé‡æ–°åˆ†é…äº†ä¸€ä¸ªå¼•ç”¨ï¼Œä½†æ˜¯å®é™…æŒ‡å‘çš„å†…å­˜å’ŒobjAæ˜¯åŒä¸€ä¸ªï¼Œè¿™å°±æ˜¯<strong>æµ…æ‹·è´</strong>ï¼›ç›¸åï¼Œå¦‚æœobjBé™¤äº†åœ¨æ ˆä¸Šåˆ†é…äº†æ–°çš„å¼•ç”¨ï¼Œå¹¶ä¸”åœ¨å †ä¸Šä¹Ÿåˆ†é…äº†æ–°çš„å†…å­˜ç©ºé—´ï¼Œè¿™å°±æ˜¯<strong>æ·±æ‹·è´</strong>ã€‚</p>
<blockquote>
<p>æµ…æ‹·è´å°±æ˜¯å¤åˆ¶å¯¹è±¡çš„å¼•ç”¨ï¼Œä¿®æ”¹å¤åˆ¶çš„å¯¹è±¡ä¼šå½±å“åŸæ¥çš„å¯¹è±¡ï¼›æ·±æ‹·è´å°±æ˜¯æ–°å»ºä¸€ä¸ªå’ŒåŸå¯¹è±¡â€œä¸€æ¨¡ä¸€æ ·â€çš„å¯¹è±¡ï¼Œä½†æ˜¯ä»–ä»¬åœ¨å †ä¸Šå ç”¨ä¸åŒçš„å†…å­˜ã€‚</p>
</blockquote>
<p><em>é¢˜å¤–è¯ï¼šå’Œæ·±æ‹·è´ï¼ˆDeep Copyï¼‰ã€æµ…æ‹·è´ï¼ˆShallow Copyï¼‰ï¼Œæœ‰ç›¸ä¼¼æ¦‚å¿µçš„è¿˜æœ‰æ·±å †ï¼ˆDeep Heapï¼‰ã€æµ…å †ï¼ˆShallow Heapï¼‰ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±æŸ¥æ‰¾èµ„æ–™ã€‚</em></p>
<h2 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h2><p><img src="https://img-blog.csdnimg.cn/20201220140829162.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE4NTE1MTU1,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<ol>
<li>å¯¹äºæ•°æ®ç±»å‹æ˜¯<strong>åŸºæœ¬æ•°æ®ç±»å‹</strong>çš„æˆå‘˜å˜é‡ï¼Œæµ…æ‹·è´ä¼šç›´æ¥å°†è¯¥å±æ€§å€¼å¤åˆ¶ä¸€ä»½ç»™æ–°çš„å¯¹è±¡ã€‚å› ä¸ºæ˜¯ä¸¤ä»½ä¸åŒçš„æ•°æ®ï¼Œæ‰€ä»¥å¯¹å…¶ä¸­ä¸€ä¸ªå¯¹è±¡çš„è¯¥æˆå‘˜å˜é‡å€¼è¿›è¡Œä¿®æ”¹ï¼Œä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡æ‹·è´å¾—åˆ°çš„æ•°æ®ã€‚</li>
<li>å¯¹äºæ•°æ®ç±»å‹æ˜¯<strong>å¼•ç”¨æ•°æ®ç±»å‹</strong>çš„æˆå‘˜å˜é‡ï¼Œæ¯”å¦‚è¯´æˆå‘˜å˜é‡æ˜¯æŸä¸ªæ•°ç»„ã€æŸä¸ªç±»çš„å¯¹è±¡ç­‰ï¼Œé‚£ä¹ˆæµ…æ‹·è´ä¼šå°†è¯¥æˆå‘˜å˜é‡çš„å¼•ç”¨å€¼ï¼ˆå†…å­˜åœ°å€ï¼‰å¤åˆ¶ä¸€ä»½ç»™æ–°çš„å¯¹è±¡ã€‚å› ä¸ºå®é™…ä¸Šä¸¤ä¸ªå¯¹è±¡çš„è¯¥æˆå‘˜å˜é‡éƒ½æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ä¿®æ”¹è¯¥æˆå‘˜å˜é‡ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„è¯¥æˆå‘˜å˜é‡å€¼ã€‚</li>
<li>Stringç±»å‹éå¸¸ç‰¹æ®Šï¼Œé¦–å…ˆï¼ŒStringç±»å‹<strong>å±äºå¼•ç”¨æ•°æ®ç±»å‹</strong>ï¼Œä¸å±äºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä½†æ˜¯Stringç±»å‹çš„æ•°æ®æ˜¯å­˜æ”¾åœ¨å¸¸é‡æ± ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯æ— æ³•ä¿®æ”¹çš„ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¿®æ”¹Stringç±»å‹æˆå‘˜å˜é‡åï¼Œå¹¶ä¸æ˜¯ä¿®æ”¹äº†è¿™ä¸ªæ•°æ®çš„å€¼ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªæ•°æ®çš„<strong>å¼•ç”¨æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¸¸é‡</strong>ã€‚<h3 id="å®ç°æ–¹å¼"><a href="#å®ç°æ–¹å¼" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h3><h4 id="ä½¿ç”¨æ‹·è´æ„é€ æ–¹æ³•"><a href="#ä½¿ç”¨æ‹·è´æ„é€ æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ‹·è´æ„é€ æ–¹æ³•"></a>ä½¿ç”¨æ‹·è´æ„é€ æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String[] args)</span> &#123;</span><br><span class="line">	<span class="type">Address</span> <span class="variable">addr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>(<span class="string">&quot;åŒ—äº¬&quot;</span>)</span><br><span class="line">	<span class="type">User</span> <span class="variable">userA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">10</span>,addr);</span><br><span class="line">	System.out.println(userA.getAge());</span><br><span class="line">	<span class="comment">//æµ…æ‹·è´</span></span><br><span class="line">	<span class="type">User</span> <span class="variable">userC</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(userA);</span><br><span class="line">	userC.setAge(<span class="number">30</span>);</span><br><span class="line">	System.out.println(userA.getAge());</span><br><span class="line">	System.out.println(userC.getAge());</span><br><span class="line">	System.out.println(userA.getAddr() == userCopy.getAddr());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> Address addr;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> age,Address addr)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">		<span class="built_in">this</span>.addr = addr;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//å¤åˆ¶æ„é€ æ–¹æ³•ï¼Œæ¨¡æ‹Ÿæµ…æ‹·è´</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">User</span><span class="params">(User source)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = source.age;</span><br><span class="line">        <span class="built_in">this</span>.addr = source.addr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String addr;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">Address</span><span class="params">(String addr)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.addr = addr;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
è¾“å‡ºç»“æœï¼š</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">10</span><br><span class="line">20</span><br><span class="line">false</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨Cloneable"><a href="#ä½¿ç”¨Cloneable" class="headerlink" title="ä½¿ç”¨Cloneable"></a>ä½¿ç”¨Cloneable</h4><ol>
<li>å®ç°<code>Cloneable</code>æ¥å£ï¼›</li>
<li>é‡å†™Objectç±»çš„<code>clone()</code>æ–¹æ³•ï¼›</li>
</ol>
<p><code>Address.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xujian</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-12-20 14:52</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String addr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Address</span><span class="params">(String addr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.addr = addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddr</span><span class="params">(String addr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.addr = addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Address&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;addr=&#x27;&quot;</span> + addr + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>User.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xujian</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-12-20 14:52</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Address addr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> age, Address addr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.addr = addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Address <span class="title function_">getAddr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddr</span><span class="params">(Address addr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.addr = addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, addr=&quot;</span> + addr +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xujian</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-12-20 15:08</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="type">Address</span> <span class="variable">addr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>(<span class="string">&quot;åŒ—äº¬å¸‚&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">userA</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">10</span>,addr);</span><br><span class="line">        <span class="type">User</span> <span class="variable">userCopy</span> <span class="operator">=</span> (User) userA.clone();</span><br><span class="line">        System.out.println(userA);</span><br><span class="line">        System.out.println(userCopy);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­userAå’ŒuserCopyæ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        System.out.println(userA == userCopy);</span><br><span class="line">        userCopy.setAge(<span class="number">20</span>);</span><br><span class="line">        addr.setAddr(<span class="string">&quot;è¥¿å®‰å¸‚&quot;</span>);</span><br><span class="line">        System.out.println(userA);</span><br><span class="line">        System.out.println(userCopy);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­userAçš„æˆå‘˜å˜é‡addrå’ŒuserCopyçš„æˆå‘˜å˜é‡addræ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        System.out.println(userA.getAddr() == userCopy.getAddr());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡º</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">10</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span>&#125;&#125;</span><br><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">10</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;åŒ—äº¬å¸‚&#x27;</span>&#125;&#125;</span><br><span class="line"><span class="literal">false</span></span><br><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">10</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;è¥¿å®‰å¸‚&#x27;</span>&#125;&#125;</span><br><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">20</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;è¥¿å®‰å¸‚&#x27;</span>&#125;&#125;</span><br><span class="line"><span class="literal">true</span></span><br></pre></td></tr></table></figure>
<ol>
<li>åŸºæœ¬ç±»å‹çš„æˆå‘˜å˜é‡åŸå§‹å¯¹è±¡å’Œæ‹·è´å¯¹è±¡äº’ä¸å½±å“ï¼›</li>
<li>å¯ä»¥çœ‹åˆ°clone()æ–¹æ³•æ‹·è´çš„userCopyå¯¹è±¡å’ŒåŸå¯¹è±¡çš„<strong>å†…å®¹æ˜¯ä¸€æ ·çš„</strong>ã€‚ç„¶è€Œä»–ä»¬å¹¶<strong>ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡</strong>ï¼›</li>
<li>åŸå§‹å¯¹è±¡å’Œæ‹·è´çš„è±¡ä»–ä»¬çš„å¼•ç”¨ç±»å‹æˆå‘˜å˜é‡<code>Address::addr</code>æ˜¯åŒä¸€ä¸ªå¯¹è±¡;</li>
<li>Object::clone()æœ¬èº«æ˜¯ä¸ªæµ…æ‹·è´å®ç°;</li>
</ol>
<p>âš ï¸æ³¨æ„</p>
<ol>
<li>ä½¿ç”¨<code>clone()</code>æ–¹æ³•æ—¶å¿…é¡»å®ç°Cloneableæ¥å£ï¼Œå¦åˆ™ä¼šæŠ¥é”™<code>CloneNotSupportedException</code>ï¼Œå…¶å®Cloneableæ¥å£æ²¡æœ‰å®šä¹‰ä»»ä½•æ–¹æ³•ï¼Œå®ƒå’Œ<code>Serializable</code>æ¥å£ä¸€æ ·ï¼Œéƒ½æ˜¯èµ·åˆ°ä¸€ä¸ªæ ‡è¯†ä½œç”¨;</li>
<li><code>clone()</code>æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œæ‰€ä»¥åœ¨æµ…æ‹·è´ä¸Šå…¶æ•ˆç‡è¿˜æ˜¯å¾ˆå¥½çš„;</li>
<li><code>clone()</code>ä¸‰åŸåˆ™ï¼š<br>â‘  å¯¹ä»»ä½•çš„å¯¹è±¡xï¼Œéƒ½æœ‰x.clone() !&#x3D;x&#x2F;&#x2F;å…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼›<br>â‘¡ å¯¹ä»»ä½•çš„å¯¹è±¡xï¼Œéƒ½æœ‰x.clone().getClass()&#x3D;&#x3D;x.getClass()&#x2F;&#x2F;å…‹éš†å¯¹è±¡ä¸åŸå¯¹è±¡çš„ç±»å‹ä¸€æ ·ï¼›<br>â‘¢ å¦‚æœå¯¹è±¡xçš„equals()æ–¹æ³•å®šä¹‰æ°å½“ï¼Œé‚£ä¹ˆx.clone().equals(x)åº”è¯¥æˆç«‹ï¼›<h4 id="ä½¿ç”¨Setteræ–¹æ³•"><a href="#ä½¿ç”¨Setteræ–¹æ³•" class="headerlink" title="ä½¿ç”¨Setteræ–¹æ³•"></a>ä½¿ç”¨Setteræ–¹æ³•</h4>é€šè¿‡å¯¹è±¡å†…éƒ¨æä¾›çš„<code>Setter</code>æ–¹æ³•ç®€å•ä¸”ç›´æ¥çš„è¿›è¡Œå¯¹è±¡çš„æ‹·è´ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> User <span class="title function_">copyBySetter</span><span class="params">(User source)</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setAge(source.getAge());</span><br><span class="line">        user.setAddr(source.getAddr());</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><img src="https://img-blog.csdnimg.cn/2020122014085249.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE4NTE1MTU1,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li>
<li>ä¸ä»…è¦å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰åŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡å€¼ï¼Œè¿˜è¦ä¸ºæ‰€æœ‰å¼•ç”¨æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ç”³è¯·å­˜å‚¨ç©ºé—´ï¼Œå¹¶å¤åˆ¶æ¯ä¸ªå¼•ç”¨æ•°æ®ç±»å‹æˆå‘˜å˜é‡æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œä¸€ç›´<strong>é€’å½’</strong>ä¸‹å»ç›´åˆ°æ²¡æœ‰å¼•ç”¨ç±»å‹çš„æˆå‘˜å˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡è¿›è¡Œæ·±æ‹·è´è¦å¯¹æ•´ä¸ªå¯¹è±¡å›¾è¿›è¡Œæ‹·è´ï¼›</li>
<li>æ·±æ‹·è´å¯¹å¼•ç”¨æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡çš„å¯¹è±¡å›¾ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½å¼€è¾Ÿäº†å†…å­˜ç©ºé—´ï¼›è€Œæµ…æ‹·è´åªæ˜¯ä¼ é€’åœ°å€æŒ‡å‘ï¼Œæ–°çš„å¯¹è±¡å¹¶æ²¡æœ‰å¯¹å¼•ç”¨æ•°æ®ç±»å‹åˆ›å»ºå†…å­˜ç©ºé—´ï¼›<h3 id="å®ç°æ–¹å¼-1"><a href="#å®ç°æ–¹å¼-1" class="headerlink" title="å®ç°æ–¹å¼"></a>å®ç°æ–¹å¼</h3><h4 id="ä½¿ç”¨Cloneable-1"><a href="#ä½¿ç”¨Cloneable-1" class="headerlink" title="ä½¿ç”¨Cloneable"></a>ä½¿ç”¨Cloneable</h4>åœ¨ä¸Šé¢ä½¿ç”¨<code>Cloneable</code>å®ç°æµ…æ‹·è´çš„åŸºç¡€ä¸Šï¼Œå¯¹<code>clone</code>æ–¹æ³•è¿›è¡Œæ”¹é€ ï¼š<br><code>City.java</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xujian</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-12-26 12:30</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">City</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>, Serializable&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">City</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">City</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;City&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Address.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xujian</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-12-20 14:52</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>, Serializable&#123;</span><br><span class="line">    <span class="keyword">private</span> String addr;</span><br><span class="line">    <span class="keyword">private</span> City city;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Address</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Address</span><span class="params">(String addr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.addr = addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddr</span><span class="params">(String addr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.addr = addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCity</span><span class="params">(City city)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.city = city;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> City <span class="title function_">getCity</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> city;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> (Address) <span class="built_in">super</span>.clone();</span><br><span class="line">        <span class="type">City</span> <span class="variable">city</span> <span class="operator">=</span> (City) address.getCity().clone();</span><br><span class="line">        address.setCity(city);</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Address&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;addr=&#x27;&quot;</span> + addr + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, city=&quot;</span> + city +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>User.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xujian</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-12-20 14:52</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span>, Serializable&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Address addr;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> age, Address addr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.addr = addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(User source)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = source.age;</span><br><span class="line">        <span class="built_in">this</span>.addr = source.addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Address <span class="title function_">getAddr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddr</span><span class="params">(Address addr)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.addr = addr;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) <span class="built_in">super</span>.clone();</span><br><span class="line">        <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> (Address) user.getAddr().clone();</span><br><span class="line">        user.setAddr(address);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, addr=&quot;</span> + addr +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        source.setAge(<span class="number">70</span>);</span><br><span class="line">        <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        address.setAddr(<span class="string">&quot;é™•è¥¿çœ&quot;</span>);</span><br><span class="line">        <span class="type">City</span> <span class="variable">city</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;æ¸­å—å¸‚&quot;</span>);</span><br><span class="line">        address.setCity(city);</span><br><span class="line">        source.setAddr(address);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">copyUser</span> <span class="operator">=</span> (User) source.clone();</span><br><span class="line">        System.out.println(source);</span><br><span class="line">        System.out.println(copyUser);</span><br><span class="line">        System.out.println(source == copyUser);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">70</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;é™•è¥¿çœ&#x27;</span>, city=<span class="title class_">City</span>&#123;name=<span class="string">&#x27;æ¸­å—å¸‚&#x27;</span>&#125;&#125;&#125;</span><br><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">70</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;é™•è¥¿çœ&#x27;</span>, city=<span class="title class_">City</span>&#123;name=<span class="string">&#x27;æ¸­å—å¸‚&#x27;</span>&#125;&#125;&#125;</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™ç§æ–¹å¼åœ¨<code>clone()</code>æ–¹æ³•çš„æµ…æ‹·è´åŸºç¡€ä¸Šï¼Œæ ¹æ®å¼•ç”¨ç±»å‹æˆå‘˜å˜é‡ä½¿ç”¨å±‚å±‚è°ƒç”¨ï¼Œæ¥å®ç°æ·±æ‹·è´ï¼Œä¹Ÿæ˜¯æœ‰ç‚¹ç¹ççš„ã€‚</p>
</blockquote>
<h4 id="åºåˆ—åŒ–æ–¹å¼"><a href="#åºåˆ—åŒ–æ–¹å¼" class="headerlink" title="åºåˆ—åŒ–æ–¹å¼"></a>åºåˆ—åŒ–æ–¹å¼</h4><blockquote>
<p>è¿™ç§æ–¹å¼åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘å·¥ä½œä¸­éå¸¸å¸¸è§ï¼Œé¿å…äº†æ‰‹åŠ¨å®ç°æ·±æ‹·è´ä¸­â€œé€’å½’â€çš„æ“ä½œï¼Œæ‰€ä»¥çœ‹ä¸Šå»ä¼šæ¯”ä¸Šé¢çš„æ–¹å¼ç®€å•ä¸€ç‚¹ã€‚</p>
</blockquote>
<h5 id="Jsonåºåˆ—åŒ–-x2F-ååºåˆ—åŒ–"><a href="#Jsonåºåˆ—åŒ–-x2F-ååºåˆ—åŒ–" class="headerlink" title="Jsonåºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–"></a>Jsonåºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–</h5><p>å¯ä»¥æƒ³ä¸€æƒ³ï¼ŒSpringMVCä¸­çš„Controlleråœ¨ä¼ é€’å¯¹è±¡å‚æ•°å’Œè¿”å›å¯¹è±¡æ•°æ®æ—¶çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚<br><img src="https://img-blog.csdnimg.cn/20201226161120388.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE4NTE1MTU1,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>ä»Jsonå­—ç¬¦ä¸²ååºåˆ—åŒ–æ¥çš„å¯¹è±¡éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p>
</blockquote>
<p>ä¾æ—§æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        source.setAge(<span class="number">70</span>);</span><br><span class="line">        <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        address.setAddr(<span class="string">&quot;é™•è¥¿çœ&quot;</span>);</span><br><span class="line">        <span class="type">City</span> <span class="variable">city</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;æ¸­å—å¸‚&quot;</span>);</span><br><span class="line">        address.setCity(city);</span><br><span class="line">        source.setAddr(address);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//åºåˆ—åŒ–æˆjsonå­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userJsonStr</span> <span class="operator">=</span> JSON.toJSONString(source);</span><br><span class="line">        <span class="comment">//ååºåˆ—åŒ–æˆå¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">copyUser</span> <span class="operator">=</span> JSON.parseObject(userJsonStr,User.class);</span><br><span class="line"></span><br><span class="line">        System.out.println(source);</span><br><span class="line">        System.out.println(copyUser);</span><br><span class="line">        System.out.println(source == copyUser);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">70</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;é™•è¥¿çœ&#x27;</span>, city=<span class="title class_">City</span>&#123;name=<span class="string">&#x27;æ¸­å—å¸‚&#x27;</span>&#125;&#125;&#125;</span><br><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">70</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;é™•è¥¿çœ&#x27;</span>, city=<span class="title class_">City</span>&#123;name=<span class="string">&#x27;æ¸­å—å¸‚&#x27;</span>&#125;&#125;&#125;</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯è§ååºåˆ—åŒ–ç”Ÿæˆçš„å¯¹è±¡æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p>
</blockquote>
<h5 id="JDKåºåˆ—åŒ–-x2F-ååºåˆ—åŒ–"><a href="#JDKåºåˆ—åŒ–-x2F-ååºåˆ—åŒ–" class="headerlink" title="JDKåºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–"></a>JDKåºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–</h5><p>åŒæ ·è¿˜æœ‰JDKè‡ªå¸¦çš„åºåˆ—åŒ–æ–¹å¼ã€‚<br>ä¾æ—§æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        source.setAge(<span class="number">70</span>);</span><br><span class="line">        <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        address.setAddr(<span class="string">&quot;é™•è¥¿çœ&quot;</span>);</span><br><span class="line">        <span class="type">City</span> <span class="variable">city</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;æ¸­å—å¸‚&quot;</span>);</span><br><span class="line">        address.setCity(city);</span><br><span class="line">        source.setAddr(address);</span><br><span class="line">        </span><br><span class="line">        <span class="type">User</span> <span class="variable">copyUser</span> <span class="operator">=</span> jdkDeepCopy(source);</span><br><span class="line"></span><br><span class="line">        System.out.println(source);</span><br><span class="line">        System.out.println(copyUser);</span><br><span class="line">        System.out.println(source == copyUser);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * jdkåºåˆ—åŒ–/ååºåˆ—åŒ–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> source</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User <span class="title function_">jdkDeepCopy</span><span class="params">(User source)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//å°†å¯¹è±¡å†™åˆ°æµé‡Œ</span></span><br><span class="line">        ByteArrayOutputStream bo=<span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        ObjectOutputStream oo=<span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(bo);</span><br><span class="line">        oo.writeObject(source);</span><br><span class="line">        <span class="comment">//ä»æµé‡Œè¯»å‡ºæ¥</span></span><br><span class="line">        ByteArrayInputStream bi=<span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(bo.toByteArray());</span><br><span class="line">        ObjectInputStream oi=<span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(bi);</span><br><span class="line">        <span class="keyword">return</span> (User) oi.readObject();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">70</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;é™•è¥¿çœ&#x27;</span>, city=<span class="title class_">City</span>&#123;name=<span class="string">&#x27;æ¸­å—å¸‚&#x27;</span>&#125;&#125;&#125;</span><br><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">70</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;é™•è¥¿çœ&#x27;</span>, city=<span class="title class_">City</span>&#123;name=<span class="string">&#x27;æ¸­å—å¸‚&#x27;</span>&#125;&#125;&#125;</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h4 id="æ‰‹åŠ¨ä½¿ç”¨Setterå±‚å±‚è®¾ç½®å±æ€§"><a href="#æ‰‹åŠ¨ä½¿ç”¨Setterå±‚å±‚è®¾ç½®å±æ€§" class="headerlink" title="æ‰‹åŠ¨ä½¿ç”¨Setterå±‚å±‚è®¾ç½®å±æ€§"></a>æ‰‹åŠ¨ä½¿ç”¨Setterå±‚å±‚è®¾ç½®å±æ€§</h4><p>è¿˜æ˜¯åŸºäºä¸Šé¢çš„ä¾‹å­ï¼Œå¢åŠ ä¸€ä¸ªæ‰‹åŠ¨ä½¿ç”¨Setterè¿›è¡Œcopyçš„æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        source.setAge(<span class="number">70</span>);</span><br><span class="line">        <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        address.setAddr(<span class="string">&quot;é™•è¥¿çœ&quot;</span>);</span><br><span class="line">        <span class="type">City</span> <span class="variable">city</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">City</span>(<span class="string">&quot;æ¸­å—å¸‚&quot;</span>);</span><br><span class="line">        address.setCity(city);</span><br><span class="line">        source.setAddr(address);</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">copyUser</span> <span class="operator">=</span> getDeepCopyInstance(source);</span><br><span class="line">        System.out.println(source);</span><br><span class="line">        System.out.println(copyUser);</span><br><span class="line">        System.out.println(source == copyUser);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¾—åˆ°æŒ‡å®šå¯¹è±¡çš„ä¸€ä¸ªæ·±æ‹·è´å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User <span class="title function_">getDeepCopyInstance</span><span class="params">(User source)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">copyUser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        copyUser.setAge(source.getAge());</span><br><span class="line">        <span class="type">Address</span> <span class="variable">address</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Address</span>();</span><br><span class="line">        address.setAddr(source.getAddr().getAddr());</span><br><span class="line">        <span class="type">City</span> <span class="variable">city</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">City</span>();</span><br><span class="line">        city.setName(source.getAddr().getCity().getName());</span><br><span class="line">        address.setCity(city);</span><br><span class="line">        copyUser.setAddr(address);</span><br><span class="line">        <span class="keyword">return</span> copyUser;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">70</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;é™•è¥¿çœ&#x27;</span>, city=<span class="title class_">City</span>&#123;name=<span class="string">&#x27;æ¸­å—å¸‚&#x27;</span>&#125;&#125;&#125;</span><br><span class="line"><span class="title class_">User</span>&#123;age=<span class="number">70</span>, addr=<span class="title class_">Address</span>&#123;addr=<span class="string">&#x27;é™•è¥¿çœ&#x27;</span>, city=<span class="title class_">City</span>&#123;name=<span class="string">&#x27;æ¸­å—å¸‚&#x27;</span>&#125;&#125;&#125;</span><br><span class="line"><span class="literal">false</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™ä¸ªæ–¹æ³•è™½ç„¶å¯ä»¥è¾¾åˆ°æ•ˆæœï¼Œä½†æ˜¯ç¼–ç ç¹çï¼Œå¹¶ä¸”ä¸å¤Ÿé€šç”¨ï¼Œè¯•æƒ³å¼•ç”¨é“¾å¾ˆé•¿çš„æ—¶å€™ç¼–ç å·¥ä½œé‡å¾—å¤šææ€–ã€‚</p>
</blockquote>
<p>å…¶ä»–æ–¹å¼è¿˜å¯ä»¥å€ŸåŠ©<strong>åå°„ç›´æ¥è¿›è¡Œå±æ€§èµ‹å€¼ï¼Œå†…çœæœºåˆ¶ï¼ˆä¾èµ–äºåå°„ï¼‰é€šè¿‡è°ƒç”¨Setteræ–¹æ³•ï¼Œæ„é€ å‡½æ•°</strong>ç­‰é€šè¿‡å±‚å±‚é€’å½’æ¥è¿›è¡Œå¯¹è±¡çš„æ·±æ‹·è´ã€‚</p>
<h1 id="Beanæ‹·è´å·¥å…·"><a href="#Beanæ‹·è´å·¥å…·" class="headerlink" title="Beanæ‹·è´å·¥å…·"></a>Beanæ‹·è´å·¥å…·</h1><h2 id="Apacheçš„BeanUtils"><a href="#Apacheçš„BeanUtils" class="headerlink" title="Apacheçš„BeanUtils"></a>Apacheçš„BeanUtils</h2><p>ä½äº<code>org.apache.commons.beanutils</code>åŒ…ä¸‹ã€‚é€šè¿‡ä¸Šé¢æåˆ°çš„<strong>å†…çœæœºåˆ¶</strong>è°ƒç”¨<code>Setter</code>æ–¹æ³•å®ç°ã€‚é»˜è®¤å®ç°<strong>æµ…æ‹·è´</strong>ï¼Œæƒ³è¦å®ç°æ·±æ‹·è´ï¼Œåˆ™éœ€è¦æä¾›è‡ªå®šä¹‰çš„<code>Converter</code>ã€‚<br>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanUtilsDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">UserDO</span> <span class="variable">userDO</span> <span class="operator">=</span> DataUtil.createData();</span><br><span class="line">        log.info(<span class="string">&quot;æ‹·è´å‰,userDO:&#123;&#125;&quot;</span>, userDO);</span><br><span class="line">        <span class="type">UserDTO</span> <span class="variable">userDTO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDTO</span>();</span><br><span class="line">        BeanUtils.copyProperties(userDO,userDTO);</span><br><span class="line">        log.info(<span class="string">&quot;æ‹·è´å,userDO:&#123;&#125;&quot;</span>, userDO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">18</span>:<span class="number">12</span>:<span class="number">11.734</span> [main] <span class="variable constant_">INFO</span> cn.<span class="property">van</span>.<span class="property">parameter</span>.<span class="property">bean</span>.<span class="property">copy</span>.<span class="property">demo</span>.<span class="property">BeanUtilsDemo</span> - æ‹·è´å‰,<span class="attr">userDO</span>:<span class="title class_">UserDO</span>(id=<span class="number">1</span>, userName=<span class="title class_">Van</span>, gmtBroth=<span class="number">2019</span>-<span class="number">11</span>-02<span class="attr">T18</span>:<span class="number">12</span>:<span class="number">11.730</span>, balance=<span class="number">100</span>)</span><br><span class="line"><span class="number">18</span>:<span class="number">12</span>:<span class="number">11.917</span> [main] <span class="variable constant_">INFO</span> cn.<span class="property">van</span>.<span class="property">parameter</span>.<span class="property">bean</span>.<span class="property">copy</span>.<span class="property">demo</span>.<span class="property">BeanUtilsDemo</span> - æ‹·è´å,<span class="attr">userDO</span>:<span class="title class_">UserDO</span>(id=<span class="number">1</span>, userName=<span class="title class_">Van</span>, gmtBroth=<span class="number">2019</span>-<span class="number">11</span>-02<span class="attr">T18</span>:<span class="number">12</span>:<span class="number">11.730</span>, balance=<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç¨³å®šæ€§ä¸æ•ˆç‡éƒ½ä¸è¡Œï¼Œä¸æ¨èä½¿ç”¨ã€‚</p>
</blockquote>
<h2 id="Apacheçš„PropertyUtils"><a href="#Apacheçš„PropertyUtils" class="headerlink" title="Apacheçš„PropertyUtils"></a>Apacheçš„PropertyUtils</h2><p>ä½äº<code>org.apache.commons.beanutils</code>åŒ…ä¸‹ã€‚<br><code>PropertyUtils</code>çš„<code>copyProperties()</code>æ–¹æ³•å‡ ä¹ä¸<code>BeanUtils.copyProperties()</code>ç›¸åŒï¼Œä¸»è¦çš„åŒºåˆ«åœ¨äº<code>BeanUtils.copyProperties()</code>æä¾›<strong>ç±»å‹è½¬æ¢</strong>åŠŸèƒ½ï¼Œå³å‘ç°ä¸¤ä¸ªJavaBeançš„åŒåå±æ€§ä¸ºä¸åŒç±»å‹æ—¶ï¼Œåœ¨æ”¯æŒçš„æ•°æ®ç±»å‹èŒƒå›´å†…è¿›è¡Œè½¬æ¢ï¼ŒPropertyUtilsä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œæ‰€ä»¥è¯´BeanUtilsä½¿ç”¨æ›´æ™®éä¸€ç‚¹ï¼ŒçŠ¯é”™çš„é£é™©æ›´ä½ä¸€ç‚¹ï¼Œé»˜è®¤å®ç°<strong>æµ…æ‹·è´</strong>ã€‚</p>
<h2 id="Apacheçš„SerializationUtils"><a href="#Apacheçš„SerializationUtils" class="headerlink" title="Apacheçš„SerializationUtils"></a>Apacheçš„SerializationUtils</h2><p>ä½äº<code>org.apache.commons.lang3</code>åŒ…ä¸‹ã€‚<br><code>SerializationUtils.clone(T)</code>ï¼ŒTå¯¹è±¡éœ€è¦å®ç° Serializable æ¥å£ï¼ŒåŸºäºJDKåºåˆ—åŒ–å®ç°äº†<strong>æ·±å…‹éš†</strong>ã€‚</p>
<blockquote>
<p>æ·±æ‹·è´å¯ä»¥ä½¿ç”¨ã€‚</p>
</blockquote>
<h2 id="Springçš„BeanUtils"><a href="#Springçš„BeanUtils" class="headerlink" title="Springçš„BeanUtils"></a>Springçš„BeanUtils</h2><p>ä½äº<code>org.springframework.beans</code>åŒ…ä¸‹ã€‚<br>å…¶<code>copyProperties</code>æ–¹æ³•å®ç°åŸç†å’Œ<code>Apache BeanUtils.copyProperties</code>åŸç†ç±»ä¼¼ï¼Œé»˜è®¤å®ç°<strong>æµ…æ‹·è´</strong>ï¼ŒåŒºåˆ«åœ¨äºå¯¹<code>PropertyDescriptor</code>ï¼ˆå†…çœæœºåˆ¶ç›¸å…³ï¼‰çš„å¤„ç†ç»“æœåšäº†ç¼“å­˜æ¥æå‡æ€§èƒ½ã€‚</p>
<h2 id="Springçš„BeanCopier"><a href="#Springçš„BeanCopier" class="headerlink" title="Springçš„BeanCopier"></a>Springçš„BeanCopier</h2><p>ä½äº<code>org.springframework.cglib.beans</code>åŒ…ä¸‹ï¼Œé»˜è®¤å®ç°<strong>æµ…æ‹·è´</strong>ã€‚<br>BeanCopieræ”¯æŒä¸¤ç§æ–¹å¼:</p>
<ol>
<li>ä¸ä½¿ç”¨Converterçš„æ–¹å¼ï¼Œä»…å¯¹ä¸¤ä¸ªbeané—´å±æ€§åå’Œç±»å‹å®Œå…¨ç›¸åŒçš„å˜é‡è¿›è¡Œæ‹·è´;</li>
<li>å¼•å…¥Converterï¼Œå¯ä»¥å¯¹æŸäº›ç‰¹å®šå±æ€§å€¼è¿›è¡Œç‰¹æ®Šæ“ä½œï¼Œä½†æ€§èƒ½ä¼šå¤§å¤§é™ä½ã€‚</li>
</ol>
<p>é€šè¿‡æ“ä½œå­—èŠ‚ç ç”Ÿæˆç±»ï¼Œæ¥å®ç°åŸæœ¬éœ€è¦é€šè¿‡åå°„æˆ–è€…ä¸€å †ä»£ç æ‰èƒ½å®ç°çš„é€»è¾‘ï¼Œå†…éƒ¨è¿˜æ˜¯é€šè¿‡ç›´æ¥è°ƒç”¨<code>Setter</code>æ–¹æ³•æ¥å®ç°ã€‚</p>
<blockquote>
<p>ä½¿ç”¨äº†å­—èŠ‚ç æ“ä½œå–ä»£åå°„ï¼Œä½¿ç”¨ç¼“å­˜ä»¥åŠé€šè¿‡<code>Setter</code>æ–¹æ³•è®¾ç½®å±æ€§å€¼ä½¿å…¶æ€§èƒ½éå¸¸ä¼˜ç§€ï¼Œæ¨èä½¿ç”¨ã€‚</p>
</blockquote>
<p><strong>Tips</strong>ï¼š<br><em>å®é™…ä½¿ç”¨æ—¶ï¼Œå¯ä»¥æŠŠåˆ›å»ºè¿‡çš„BeanCopierå®ä¾‹æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œä¸‹æ¬¡å¯ä»¥ç›´æ¥è·å–ï¼Œæå‡æ€§èƒ½ã€‚</em></p>
<h2 id="MapStruct"><a href="#MapStruct" class="headerlink" title="MapStruct"></a>MapStruct</h2><p>é»˜è®¤å®ç°<strong>æµ…æ‹·è´</strong>ï¼Œé€šè¿‡æ³¨è§£ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆæ‹·è´çš„ä»£ç ï¼ŒåŸºäºç›´æ¥è°ƒç”¨<code>Setter</code>æ–¹æ³•å®ç°ã€‚</p>
<blockquote>
<p>æ€§èƒ½è¿˜ä¸é”™ï¼Œä¸»è¦æ˜¯ä½¿ç”¨æ–¹ä¾¿ï¼ŒåŠ ä¸Šæ³¨è§£å°±å¯ä»¥ç”¨äº†ã€‚</p>
</blockquote>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ol>
<li>æµ…æ‹·è´ï¼šæ˜¯å¯¹åŸå¯¹è±¡çš„å±æ€§å€¼è¿›è¡Œç²¾å‡†å¤åˆ¶ï¼Œé‚£ä¹ˆå¯¹å¦‚æœåŸå¯¹è±¡çš„å±æ€§å€¼æ˜¯åŸºæœ¬ç±»å‹é‚£å°±æ˜¯å€¼çš„å¼•ç”¨ï¼Œæ‰€ä»¥æµ…æ‹·è´åä¿®æ”¹åŸºæœ¬ç±»å‹ä¸ä¼šä¿®æ”¹åˆ°åŸå¯¹è±¡çš„ï¼Œå¦‚æœåŸå¯¹è±¡å±æ€§å€¼æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆå°±æ˜¯å¯¹å¼•ç”¨ç±»å‹å±æ€§å€¼çš„æ ˆå†…å­˜çš„å¤åˆ¶ï¼Œæ‰€ä»¥ä¿®æ”¹å¼•ç”¨ç±»å‹å±æ€§å€¼çš„æ—¶å€™å›ä¿®æ”¹åˆ°åŸå¯¹è±¡ã€‚</li>
<li>æ·±æ‹·è´ï¼šåœ¨æµ…æ‹·è´çš„åŸºç¡€ä¸Šï¼Œå¯¹å¼•ç”¨ç±»å‹å¼€è¾Ÿæ–°çš„å †å†…å­˜è¿›è¡Œå±‚å±‚æ‹·è´ã€‚</li>
<li>ä¸Šæ–‡ä¸­æåˆ°çš„æ·±å †ï¼Œæµ…å †ï¼Œå†…çœæœºåˆ¶æœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</li>
</ol>
<p>ä¸Šæ–‡ç¤ºä¾‹ä»£ç è¯·å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://github.com/xujian01/blogcode/tree/master/src/main/java/shallowcopy">æµ…æ‹·è´</a>ã€<a target="_blank" rel="noopener" href="https://github.com/xujian01/blogcode/tree/master/src/main/java/deepcopy">æ·±æ‹·è´</a>ã€‚</p>
<h1 id="è§‚ä¼—è€çˆ·æ±‚ç‚¹èµ"><a href="#è§‚ä¼—è€çˆ·æ±‚ç‚¹èµ" class="headerlink" title="è§‚ä¼—è€çˆ·æ±‚ç‚¹èµ"></a>è§‚ä¼—è€çˆ·æ±‚ç‚¹èµ</h1></div><div class="tags"><a href="/tags/Java/"><i class="fa fa-tag"></i>Java</a></div><div class="post-nav"><a class="pre" href="/2020/09/05/service-mesh/">Service Meshå’ŒæœåŠ¡MeshåŒ–çš„è®¤çŸ¥å’Œç†è§£</a><a class="next" href="/2020/06/22/apollo-auto-refresh/">åŸºäºApolloçš„é…ç½®è‡ªåŠ¨åˆ·æ–°ç»„ä»¶</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://example.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/Apollo/" style="font-size: 15px;">Apollo</a> <a href="/tags/SpringBoot/" style="font-size: 15px;">SpringBoot</a> <a href="/tags/Canal/" style="font-size: 15px;">Canal</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/RocketMQ/" style="font-size: 15px;">RocketMQ</a> <a href="/tags/Gson/" style="font-size: 15px;">Gson</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 15px;">å¤šçº¿ç¨‹</a> <a href="/tags/GitLab/" style="font-size: 15px;">GitLab</a> <a href="/tags/WebHook/" style="font-size: 15px;">WebHook</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/Swagger/" style="font-size: 15px;">Swagger</a> <a href="/tags/ServiceMesh/" style="font-size: 15px;">ServiceMesh</a> <a href="/tags/Skywalking/" style="font-size: 15px;">Skywalking</a> <a href="/tags/ES/" style="font-size: 15px;">ES</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2021/06/25/print-xyz/">ä½¿ç”¨ä¸‰ä¸ªçº¿ç¨‹ï¼ŒæŒ‰é¡ºåºæ‰“å°Xï¼ŒYï¼ŒZï¼Œè¿ç»­æ‰“å°10æ¬¡</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/19/enhance-jdk-proxy-v2/">å®ç°ä¸€ä¸ªå¢å¼ºç‰ˆçš„JDKåŠ¨æ€ä»£ç†V2.0</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/06/15/enhance-jdk-proxy-v1/">å®ç°ä¸€ä¸ªå¢å¼ºç‰ˆçš„JDKåŠ¨æ€ä»£ç†V1.0</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/13/mybatis-plugin/">è¿™ä¹ˆå¼ºå¤§çš„Mybatisæ’ä»¶æœºåˆ¶åŸæ¥å°±æ˜¯è¿™ï¼Ÿ</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/05/10/spring-circle-depence/">æ¢ç´¢Springå¾ªç¯ä¾èµ–çš„ç»†èŠ‚</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/04/12/skywalking-plugin-principle/">Skywalkingå¦‚ä½•é€šè¿‡ä¿®æ”¹å­—èŠ‚ç è®©æ’ä»¶ç”Ÿæ•ˆ</a></li><li class="post-list-item"><a class="post-list-link" href="/2021/03/26/gson-serialize-fail/">Gsonåºåˆ—åŒ–LinkedHashMap.Entryå¤±è´¥çš„æ¢ç´¢</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/12/20/springboot-es-mongodb/">SpringBootä¸­ä½¿ç”¨ESå’ŒMongoDBå¸¸ç”¨API</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/20/java-complier-optimization/">åˆé•¿è§è¯†äº†ï¼JVMç¼–è¯‘ä¼˜åŒ–</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/15/swagger+yapi/">Swagger API Spec + Swagger Codegen + YAPIç®¡ç†æ¥å£æ–‡æ¡£</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://blog.csdn.net/qq_18515155" title="CSDN-å¾å°é™Œçš„åšå®¢" target="_blank">CSDN-å¾å°é™Œçš„åšå®¢</a><ul></ul><a href="https://www.zhihu.com/people/xu-jian-1-1" title="çŸ¥ä¹-å€”å¼ºçš„ç å†œ" target="_blank">çŸ¥ä¹-å€”å¼ºçš„ç å†œ</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2022 <a href="/." rel="nofollow">å¢¨é±¼ğŸ¦‘çš„ä¸ªäººåšå®¢.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>